<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Account Center | Seller Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --primary: #FF6A3D;
  --secondary: #E8734A;
  --bg-light: #f4f4f8;
  --text-dark: #111;
  --font-heading: 'Space Grotesk', sans-serif;
  --font-body: 'Inter', sans-serif;
}

/* Reset */
* { box-sizing:border-box; margin:0; padding:0; font-family: var(--font-body); }

body { background: var(--bg-light); color: var(--text-dark); }

/* Navbar */
nav {
  position: sticky; top:0; width:100%; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.1);
  display:flex; justify-content:space-between; align-items:center; padding:0.7rem 2rem; z-index:1000;
}
nav .logo { font-family: var(--font-heading); font-size:1.5rem; color: var(--primary); font-weight:700; }
nav .links a { text-decoration:none; color: var(--text-dark); margin-left:1rem; font-weight:600; }
nav .links a:hover { color:var(--primary); }

/* Page Heading */
.page-heading { text-align:center; padding:2rem 1rem; font-family: var(--font-heading); font-size:2rem; color:var(--primary); }

/* Account Container */
.account-container { max-width:1000px; margin:2rem auto; padding:0 1rem; display:grid; grid-template-columns:1fr 2fr; gap:2rem; }
.sidebar { background:#fff; border-radius:12px; padding:1rem; box-shadow:0 4px 10px rgba(0,0,0,0.1); display:flex; flex-direction:column; gap:0.5rem; }
.sidebar button { padding:0.7rem; border:none; border-radius:8px; background:#eee; color:var(--text-dark); font-weight:600; cursor:pointer; text-align:left; transition:0.3s; }
.sidebar button.active, .sidebar button:hover { background: var(--primary); color:#fff; }

/* Main Content */
.main { display:flex; flex-direction:column; gap:1.5rem; }

/* Sections */
.section { display:none; }
.section.active { display:block; }

/* Profile card */
.profile-card { background:#fff; border-radius:12px; padding:1rem; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
.profile-card p { margin-bottom:0.5rem; font-weight:500; }

/* Password Form */
form { display:flex; flex-direction:column; gap:1rem; }
input { padding:0.7rem; border-radius:8px; border:1px solid #ccc; }
button.submit-btn { padding:0.7rem; border:none; border-radius:8px; background:var(--primary); color:#fff; cursor:pointer; transition:0.3s; }
button.submit-btn:hover { background:var(--secondary); }

/* Selling Cards */
.selling-cards { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:1rem; }
.selling-card { background:#fff; border-radius:12px; padding:1rem; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1); cursor:pointer; transition:0.3s; }
.selling-card:hover { transform:translateY(-5px); box-shadow:0 6px 16px rgba(0,0,0,0.15); }
.selling-card i { font-size:2rem; color: var(--primary); margin-bottom:0.5rem; }
.selling-card p { font-weight:600; }

/* Table styling */
table { width:100%; border-collapse: collapse; background:#fff; border-radius:8px; overflow:hidden; box-shadow:0 4px 10px rgba(0,0,0,0.05); }
table th, table td { padding:0.8rem; border-bottom:1px solid #eee; text-align:left; }
table th { background:#f2f2f2; }

/* Responsive */
@media(max-width:768px){
  .account-container { grid-template-columns:1fr; }
  .sidebar { flex-direction:row; overflow-x:auto; }
  .sidebar button { flex:1; white-space:nowrap; }
}
/* ======================================================
   MOBILE CURVED BOTTOM NAV
   ====================================================== */

/* Hide by default (desktop & tablet) */
.bottom-nav,
.message-btn {
  display: none;
}

/* --- Bottom Navbar --- */
.bottom-nav {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 70px;
  justify-content: space-around;
  align-items: center;
  z-index: 900;
}

/* SVG border */
.bottom-nav svg {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* Nav links container */
.nav-links {
  position: fixed;
  display: flex;
  width: 100%;
  justify-content: space-around;
  z-index: 1;
}

/* Nav icons */
.nav-links a {
  color: var(--text-dark);
  font-size: 1.4rem;
  width: 50px;
  text-align: center;
  transition: 0.3s;
}

.nav-links a:hover {
  color: var(--primary);
}

/* --- Floating Messages Button --- */
.message-btn {
  position: fixed;
  bottom: 22px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 60px;
  background: var(--glass);
  backdrop-filter: blur(20px);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--primary);
  font-size: 1.5rem;
  box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  border: 2px solid var(--primary);
  z-index: 1000;
}

/* Badge */
.message-btn .badge {
  position: fixed;
  top: 5px;
  right: 5px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: red;
  color: #fff;
  font-size: 0.7rem;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ================= MOBILE ONLY ================= */
@media (max-width:770px) {

  /* Show curved nav ONLY on mobile */
  .bottom-nav,
  .message-btn {
    display: flex;
  }

  body {
    padding-bottom: 95px;
  }

  nav .links {
    display: none;
  }

  /* Products â†’ 2 per row */
  .products-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .products {
    padding: 1rem;
  }
  .sign-up{
     border:none;
     background-color:var(--primary);
  }
}

</style>
</head>
<body>

<!-- Navbar -->
<nav>
  <div class="logo">Seller Dashboard</div>
  <div class="links">
    <a href="index.html">Home</a>
    <a href="cart.html">Cart</a>
    <a href="products.html">Products</a>
    <a href="#">Logout</a>
  </div>
</nav>

<!-- Page Heading -->
<div class="page-heading">Account Center</div>

<div class="account-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <button class="active" onclick="showSection('profile')">Profile</button>
    <button onclick="showSection('password')">Change Password</button>
    <button onclick="showSection('selling')">Selling Links</button>
    <button onclick="showSection('history')">History</button>
    <button onclick="showSection('uploads')">Uploads</button>
  </div>

  <!-- Main Content -->
  <div class="main">
    <!-- Profile -->
    <div class="section active" id="profile">
      <div class="profile-card">
        <h3>Profile Info</h3>
        <p><strong>Name:</strong> <span id="userName"></span></p>
        <p><strong>Email:</strong> <span id="userEmail"></span></p>
      </div>
    </div>

    <!-- Password -->
    <div class="section" id="password">
      <h3>Change Password</h3>
      <form id="passwordForm">
        <input type="password" name="oldPassword" placeholder="Old Password" required>
        <input type="password" name="newPassword" placeholder="New Password" required>
        <button class="submit-btn" type="submit">Update Password</button>
      </form>
    </div>

    <!-- Selling Links -->
    <div class="section" id="selling">
      <h3>Sell on Platform</h3>
      <div class="selling-cards">
        <div class="selling-card" onclick="window.open('https://sellerdashboard-440f.onrender.com/')">
          <i class="fas fa-store"></i>
          <p>Campus junction selling site</p>
        </div>
        <div class="selling-card" onclick="window.open('https://sellerdashboard-440f.onrender.com/upload')">
          <i class="fas fa-upload"></i>
          <p>products viewed</p>
        </div>
        <div class="selling-card" onclick="window.open('https://sellerdashboard-440f.onrender.com/orders')">
          <i class="fas fa-box"></i>
          <p>Orders</p>
        </div>
      </div>
    </div>

    <!-- History -->
    <div class="section" id="history">
      <h3>Order History</h3>
      <table>
        <thead>
          <tr><th>Product</th><th>Price</th><th>Date</th></tr>
        </thead>
        <tbody id="historyTable">
          <tr><td colspan="3">No history found</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Uploads -->
    <div class="section" id="uploads">
      <h3>My Uploads</h3>
      <table>
        <thead>
          <tr><th>Product</th><th>Price</th><th>Status</th></tr>
        </thead>
        <tbody id="uploadsTable">
          <tr><td colspan="3">No uploads found</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- ===== MOBILE BOTTOM NAV ===== -->
<div class="bottom-nav">
  <svg viewBox="0 0 400 50" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0 H120 Q200 100 280 0 H450 V70 H0 Z"
          fill="rgb(240, 237, 97)"
          stroke="black"
          stroke-width="0"/>
  </svg>

  <div class="nav-links">
    <a href="index.html"><i class="fas fa-home"></i></a>
    <a href="category.html"><i class="fas fa-layer-group"></i></a>
    <div style="width:60px"></div>
    <a href="cart.html"><i class="fas fa-shopping-cart"></i></a>
    <a href="account.html"><i class="fas fa-user"></i></a>
  </div>
</div>

<div class="message-btn">
  <i class="fas fa-comment"></i>
  <span class="badge">3</span>
</div>
<script>
const token = localStorage.getItem('sellerToken');
if(!token){ alert("Please log in"); window.location.href="login.html"; }

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.sidebar button').forEach(b=>b.classList.remove('active'));
  document.querySelector(`.sidebar button[onclick="showSection('${id}')"]`).classList.add('active');
}

// Load user info
async function loadUser(){
  try{
    const res = await fetch('https://sellerdashboard-440f.onrender.com/api/auth/me',{
      headers: { 'Authorization': `Bearer ${token}` }
    });
    const user = await res.json();
    document.getElementById('userName').innerText = user.name || 'N/A';
    document.getElementById('userEmail').innerText = user.email || 'N/A';
  } catch(err){ console.error(err); }
}

// Password update (PUT, no response handling)
document.getElementById('passwordForm').addEventListener('submit', async e=>{
  e.preventDefault();
  const oldPassword = e.target.oldPassword.value;
  const newPassword = e.target.newPassword.value;

  try{
    await fetch('https://campusbackend-bq3r.onrender.com/api/auth/update-password', {
      method:'PUT',
      headers:{ 'Content-Type':'application/json', 'Authorization':`Bearer ${token}` },
      body: JSON.stringify({ oldPassword, newPassword })
    });
    alert("Password update request sent.");
    e.target.reset();
  } catch(err){
    console.error(err);
    alert("Network error");
  }
});

// Init
loadUser();
</script>

</body>
</html>
